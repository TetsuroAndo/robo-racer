# TSD20+IMU 予測マージンシステム実装ステート

## 目的
- TSD20距離とIMUの加速度/速度から衝突予測を行い、状況に応じたマージンを設定する。
- 予測が危険側に働く場合のみマージンを増やし、安全余裕を確保する。

## 前提
- IMUが無効/未校正の場合は安全側のフォールバックを使う。
- 既存のTSD20クランプは維持しつつ、予測マージンを追加する。

## ステート

| 項目 | 状態 | 更新日 | メモ |
| --- | --- | --- | --- |
| 影響範囲の確認 | 完了 | 2026-02-05 | main.cpp/Config.h/ログを確認 |
| 予測マージンの設計 | 完了 | 2026-02-05 | d_needとd_allowの比較で加算 |
| Config定数の追加 | 完了 | 2026-02-05 | 予測マージン上限など |
| ログの拡張 | 完了 | 2026-02-05 | margin_pred/d_need/v_est を出力 |
| ビルド/テスト | 未実施 | 2026-02-05 | 実機で検証 |
