## PRレビュー指摘 対応ステータス（refactor/proc）

最終更新: 2026-02-06

### must（修正必須）

- **`rpi/lib/mc_core/include/mc/core/Signal.hpp`**
  - **指摘**: 無名名前空間 + `static` 変数により、ヘッダをインクルードする各 `.cpp` ごとに別インスタンスが生成される。
    - `setup_signal_handlers()` を呼んだ翻訳単位と、実際にシグナルを受けた翻訳単位で `s_stop_flag` が一致せず停止しない可能性（実害バグ）。
  - **対応**: C++17 の `inline` 変数/関数に変更し、プログラム全体で単一インスタンスに統一。
  - **状態**: 完了

- **`rpi/src/Process.cpp`（ステア角クランプ統合）**
  - **指摘**: クランプ位置変更により、スルー処理の途中で一時的に ±25deg を超えうる。
    - 操舵系なので意図していないなら `target_angle_f` 側もクランプを戻すのが安全。
  - **対応**: `target_angle_f` をスルー前に最大舵角でクランプ。
  - **状態**: 完了

### recommend / nits（任意）

- **`firmware/src/main.cpp` ABS条件式**
  - **指摘**: 「優先順位」懸念自体は、現状すでに括弧があるため優先順位バグではない。
  - **確認ポイント**: `ABS_ENABLE_IN_MANUAL=true` のとき、AUTO以外（MANUAL含む）でもABS許可になる設計が意図どおりか。
  - **状態**: 未対応（要件確認待ち）

- **`firmware/src/hardware/ImuEstimator.cpp`**
  - **指摘**: 未使用変数初期化、コメント言語、ログ出力統一など（見た目/整合性のnits）。
  - **対応**: 未使用の加速度サンプル累積メンバ（`_sum_ax/_sum_ay/_sum_az`）を削除し、コメントを日本語に統一。
  - **状態**: 完了（ログ統一は該当箇所なし）
